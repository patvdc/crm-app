<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:replace="fragments/fragments :: head"></head>

<body>
<div class="container">

    <div th:replace="fragments/fragments::header"></div>
    <div class="header">
        <h1>Details</h1>
    </div>
    <br>

    <a th:href="@{/contacts/list}" class="btn btn-primary">Back</a>
    <div class="row">
        <div class="col-sm-2">Id:</div>
        <div class="col-sm-10" th:text="${contact.id}"></div>

    </div>
    <div class="row" th:if="${!contact.fullName.trim().isEmpty()}">
        <div class="col-sm-2">Name:</div>
        <div class="col-sm-10" th:text="${contact.fullName}"></div>
    </div>
    <div class="row">
        <div class="col-sm-2">Status:</div>
        <div class="col-sm-10" th:text="${contact.leadStatus}"></div>
    </div>
    <div class="row" th:if="${!contact.email?.trim().isEmpty()}">
        <div class="col-sm-2">Email:</div>
        <div class="col-sm-10" th:text="${contact.email}"></div>
    </div>
    <div class="row" th:if="${contact.phones?.get(T(be.vdab.crm.entity.PhoneType).PHONE)}">
        <div class="col-sm-2">Phone:</div>
        <div class="col-sm-10" th:text="${contact.phones?.get(T(be.vdab.crm.entity.PhoneType).PHONE)?.number}"></div>
    </div>
    <div class="row" th:if="${contact.phones?.get(T(be.vdab.crm.entity.PhoneType).MOBILE)}">
        <div class="col-sm-2">Mobile:</div>
        <div class="col-sm-10" th:text="${contact.phones?.get(T(be.vdab.crm.entity.PhoneType).MOBILE)?.number}"></div>
    </div>
    <div class="row" th:if="${contact.owner}">
        <div class="col-sm-2">Owner:</div>
        <div class="col-sm-10" th:text="${contact.owner?.fullName}"></div>
    </div>

    <br>

    <!--<<<<<<<<<<<<<<< START Addresses >>>>>>>>>>>>>>>>> -->

    <button id="changeView">Addresses</button>
    <ul id="addresses">
        <li th:each="address : ${contact.addresses}">
            <span th:text="${address.streetName + ' '}"></span>
            <span th:text="${address.houseNumber + ((address.bus != null && !address.bus?.equals(''))? ' (bus: ' + address.bus + '), ' : ', ')}"></span>
            <span th:text="${(address.zipCode != null ? address.zipCode + ' ' : '') + address.city}"></span>
        </li>
    </ul>

    <!--<<<<<<<<<<<<<<< END Addresses >>>>>>>>>>>>>>>>> -->

    <br>
    <br>
    <a th:href="${#mvc.url('CC#editOrCreateContactRequest').arg(0, contact.id).build()}"
       class="btn btn-primary">Edit</a>
    <a th:href="${#mvc.url('CC#listAllContacts').build()}" class="btn btn-primary">Contact List</a>


    <!--<<<<<<<<<<<<<<< START QUOTES >>>>>>>>>>>>>>>>> -->
    <div class="header">
        <h2>Quotes</h2>


    </div>
    <div>
        <table class="table table-striped table-bordered">
            <thead>
            <tr>
                <th>ID</th>
                <th>Stage</th>
                <th>Total</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="quote : ${quoteList}">
                <td><a th:href="${#mvc.url('QC#quoteDetails').arg(0, quote.id).build()}" th:text="${quote.id}">1</a>
                </td>
                <td th:text="${quote.stage}"></td>
                <td th:text="${quote.total}"></td>
                <!--<td>-->
                    <!--<a th:href="${#mvc.url('QC#remove').arg(0, quote.id).build()}" class="btn btn-sm btn-danger">Remove</a>-->
                    <!--<a th:href="${#mvc.url('PC#createOrEditForm').arg(0, product.id).build()}" class="btn btn-sm btn-warning">Edit</a>-->
                <!--</td>-->
            </tr>
            </tbody>
        </table>
        <a th:href="${#mvc.url('QC#createQuoteForm').arg(0, contact.id).build()}" class="btn btn-primary">New Quote</a>

    </div>

    <!--<<<<<<<<<<<<<<< END QUOTES >>>>>>>>>>>>>>>>> -->

             <!--<<<<<<<<<<<<<<< START ACTIVITIES>>>>>>>>>>>>>>>>> -->
    <div class="header">
        <h2>Activities</h2>


    </div>
    <div>
        <table class="table table-striped table-bordered">
            <thead>
            <tr>
                <th>ID</th>
                <th>Category</th>
                <th>Status</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="activity : ${activities}">
                <td><a th:href="${#mvc.url('AC#activityDetails').arg(0, activity.id).build()}" th:text="${activity.id}">1</a></td>
                <!--<td th:text="${activity.id}"></td>-->
                <td th:text="${activity.category?:''}">NEW</td>
                <td th:text="${activity.status}"></td>
                <!--<td>-->
                <!--&lt;!&ndash;<a th:href="${#mvc.url('QC#remove').arg(0, quote.id).build()}" class="btn btn-sm btn-danger">Remove</a>&ndash;&gt;-->
                <!--&lt;!&ndash;<a th:href="${#mvc.url('PC#createOrEditForm').arg(0, product.id).build()}" class="btn btn-sm btn-warning">Edit</a>&ndash;&gt;-->
                <!--</td>-->
            </tr>
            </tbody>
        </table>
        <a th:href="${#mvc.url('AC#createActivityForm').arg(0, contact.id).build()}" class="btn btn-primary">New Activity</a>

    </div>

                      <!--<<<<<<<<<<<<<<< END ACTIVITIES >>>>>>>>>>>>>>>>> -->
    <div th:replace="fragments/fragments::footer"></div>


</div>
</body>
</html>